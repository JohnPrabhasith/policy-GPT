# LLM-Powered Intelligent Query‚ÄìRetrieval System (FastAPI)

This project is a FastAPI-based API designed for a hackathon. It implements an intelligent query-retrieval system that processes documents (PDFs) from a URL, embeds their content using Google's Gemini models, stores them in an AstraDB vector store, and answers natural language questions based on the document's context.

## ‚ú® Tech Stack

- **Backend API**: FastAPI
- **Web Server**: Uvicorn
- **LLM & Embeddings**: Google Gemini Pro
- **Vector Database**: DataStax AstraDB
- **Document Processing**: LangChain

## üöÄ Getting Started

Follow these instructions to set up and run the project locally.

### 1. Prerequisites

- Python 3.9+
- An active Google Cloud account with the Generative AI API enabled.
- An active DataStax AstraDB account.

### 2. Clone the Repository

```bash
git clone https://github.com/JohnPrabhasith/policy-GPT
```

### 3. Set Up a Virtual Environment

```bash
# For Windows
python -m venv venv
venv\Scripts\activate

# For macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

### 4. Install Dependencies

```bash
pip install -r requirements.txt
```

### 5. Configure Environment Variables

Create a `.env` file in the root of the project. Populate it with your credentials:

```env
# .env
GOOGLE_API_KEY="YOUR_GOOGLE_API_KEY"
ASTRA_DB_API_ENDPOINT="YOUR_ASTRA_DB_API_ENDPOINT"
ASTRA_DB_APPLICATION_TOKEN="YOUR_ASTRA_DB_APPLICATION_TOKEN"
ASTRA_DB_COLLECTION_NAME="hackathon_rag_collection"
API_BEARER_TOKEN="b5f1351c7b62cbbf4f7b89c552daf9e8b96ad315e1380661362c5b40545d8a6a"
```

### 6. Run the Application

Start the Uvicorn server:

```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```
The `--reload` flag automatically restarts the server when you make code changes.

### 7. Access Interactive API Docs

Once the server is running, you can access the interactive API documentation (Swagger UI) generated by FastAPI at:

**http://localhost:8000/docs**

You can also see alternative documentation (ReDoc) at:

**http://localhost:8000/redoc**

## ‚öôÔ∏è API Usage

You can use the interactive docs to test the API or use a tool like `cURL`.

### Endpoint: `POST /api/v1/hackrx/run`

This endpoint processes a document and answers a list of questions about it.

#### Headers

-   `Content-Type`: `application/json`
-   `Authorization`: `Bearer b5f1351c7b62cbbf4f7b89c552daf9e8b96ad315e1380661362c5b40545d8a6a`

#### Example cURL Request

```bash
curl -X POST "http://localhost:8000/api/v1/hackrx/run" \
-H "Content-Type: application/json" \
-H "Authorization: Bearer b5f1351c7b62cbbf4f7b89c552daf9e8b96ad315e1380661362c5b40545d8a6a" \
-d '{
    "documents": "[https://hackrx.blob.core.windows.net/assets/policy.pdf?sv=2023-01-03&st=2025-07-04T09%3A11%3A24Z&se=2027-07-05T09%3A11%3A00Z&sr=b&sp=r&sig=N4a9OU0w0QXO6AOIBiu4bpl7AXvEZogeT%2FjUHNO7HzQ%3D](https://hackrx.blob.core.windows.net/assets/policy.pdf?sv=2023-01-03&st=2025-07-04T09%3A11%3A24Z&se=2027-07-05T09%3A11%3A00Z&sr=b&sp=r&sig=N4a9OU0w0QXO6AOIBiu4bpl7AXvEZogeT%2FjUHNO7HzQ%3D)",
    "questions": [
        "What is the grace period for premium payment under the National Parivar Mediclaim Plus Policy?",
        "Does this policy cover maternity expenses, and what are the conditions?"
    ]
}'
```